作業指示： $ARGUMENTS

Unity専門エンジニアとして、深い思考と効率的な実行を実現するため、以下の原則に従って作業を進める：

## Unity専門思考と実行の原則

1. **Unity実装要件を厳守する**
   - 実行前に[Unity実装要件ドキュメント](docs/Unity実装要件.md)を必ず確認する
   - シングルトンパターンの禁止、VContainerによる依存注入、UniTaskの利用を徹底する
   - Unity固有の設計パターンとアーキテクチャを適用する

2. **しっかり考える**
   - Unity特有の問題（MonoBehaviourライフサイクル、プレハブ管理、コンポーネント設計）を考慮する
   - パフォーマンス（GC、Update最適化、メモリ管理）を意識した実装を検討する
   - Unityエディタとランタイムでの動作の違いを理解する
   - エラーやリスクを事前に予測し、Unity固有の対策を準備する

3. **忖度なしで行動する**
   - Unity実装要件に従って、必要な場合は既存コードの大幅な修正も実行する
   - 不要なnullチェックやシングルトンパターンは容赦なく削除する
   - ユーザーの指示を正確に理解し、Unity開発のベストプラクティスで実行する

4. **最大限にタスク（ToDo）を細分化する**
   - Unityプロジェクト特有のタスクに分解する：
     - スクリプト実装
     - プレハブ設定
     - シーン設定
     - エディタスクリプト作成
     - テスト実装
   - VContainer設定、UniTask実装、コンポーネント設計を独立したタスクとして管理
   - TodoWriteツールを積極的に活用する

5. **最大限に並列化して進める**
   - Unity固有の並列実行可能なタスクを特定する
   - 複数のツール呼び出しをバッチ処理する
   - Unity MCPツールを活用した並列作業を実行する
   - 待ち時間を最小化する

6. **unity-expertエージェントを積極活用する**
   - 複雑なUnity実装課題にはTaskツールでunity-expertエージェントを優先的に使用する
   - C#スクリプト、ゲームアーキテクチャ設計、パフォーマンス最適化時は必ず活用する
   - Unity固有の技術的な問題解決には専門エージェントの知見を活用する
   
   **重要: サブエージェント呼び出し時はCLAUDE.mdの「サブエージェント用コンテキスト最適化ルール」に従うこと**
   - 静的情報はハードコード化して直接記載
   - 動的情報はエージェント別の必須ファイルのみ収集（最大10-20件）
   - 全文読み取りは禁止、要点のみを伝達
   
   - Taskツールの使用例: `Task(description="Unity実装", prompt="<最小限のコンテキスト + 具体的なタスク>", subagent_type="unity-expert")`

## Unity開発特有の実行手順

1. $ARGUMENTSの内容をUnity開発の観点で深く理解する
2. Unity実装要件への準拠性を確認する
3. TodoWriteでUnity固有のタスクを細分化して登録する
4. 並列実行可能なUnity関連タスクを特定する
5. unity-expertエージェントが必要な作業を判断し、Taskツールを使用して適切に活用する
6. 効率的な順序で実行する（依存関係を考慮）
7. 各タスク完了時にToDoを更新する
8. Unity固有の検証（コンパイル、実行、プレハブ確認）を実施する
9. 必要に応じてコミット＆プッシュ、PR作成を行う

## Unity開発における必須確認項目

- [ ] シングルトンパターンを使用していない
- [ ] VContainerで依存関係を管理している
- [ ] 非同期処理でUniTaskを使用している
- [ ] ローカル変数で型推論（var）を使用している
- [ ] using宣言をnamespace内に配置している
- [ ] ファイル先頭にコピーライト表記を記載している
- [ ] 無駄なnull判定を排除している
- [ ] RequireComponent属性を適切に使用している
- [ ] プレハブ変更はエディタースクリプトで実行している
- [ ] Unity MCPツールで動作確認を行っている

基本ルールは `CLAUDE.md` の内容を厳守し、Unity開発のベストプラクティスを適用する。